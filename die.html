<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Drept InstituÈ›ional European</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-dark: #0f172a;
      --card-dark: #1e293b;
      /* TemÄƒ UE: Albastru Royal + Galben Stelat */
      --accent: #2563eb; /* Royal Blue */
      --accent-glow: #fbbf24; /* Golden Yellow */
      --correct: #10b981;
      --wrong: #ef4444;
      --warning: #f59e0b;
      --text-main: #f8fafc;
      --text-muted: #94a3b8;
      --radius: 24px;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Outfit', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.2) 0%, transparent 30%),
        radial-gradient(circle at 90% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 30%);
    }

    .top-bar {
      width: 100%;
      max-width: 700px;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 10;
    }
    .back-btn {
      background: rgba(255,255,255,0.1);
      border: none;
      color: var(--text-main);
      width: 40px;
      height: 40px;
      border-radius: 12px;
      font-size: 1.2rem;
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: 0.2s;
      text-decoration: none;
    }
    .back-btn:hover { background: rgba(255,255,255,0.2); }
    
    .streak-container {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(251, 191, 36, 0.15);
      color: var(--accent-glow);
      padding: 6px 14px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.9rem;
      border: 1px solid rgba(251, 191, 36, 0.3);
    }

    .quiz-container {
      width: 100%;
      max-width: 650px;
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 10px 20px 40px;
      position: relative;
    }

    .timer-wrapper {
      width: 100%;
      height: 6px;
      background: #334155;
      border-radius: 10px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .timer-bar {
      height: 100%;
      width: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-glow));
      border-radius: 10px;
      transform-origin: left;
    }

    .question-card {
      background: var(--card-dark);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255,255,255,0.05);
      animation: fadeInScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      margin-bottom: 20px;
    }

    .q-number { color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 10px; font-weight: 700; }
    .q-text { font-size: 1.25rem; line-height: 1.5; font-weight: 600; margin: 0 0 15px 0; }

    .answers-list { display: flex; flex-direction: column; gap: 12px; }
    .answer-option {
      position: relative;
      background: rgba(255,255,255,0.03);
      border: 2px solid rgba(255,255,255,0.08);
      padding: 18px 20px;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: flex-start;
      gap: 15px;
      font-size: 1rem;
    }
    .answer-option:hover { background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.2); }
    
    .custom-check {
      width: 24px; height: 24px; border: 2px solid var(--text-muted); border-radius: 8px; flex-shrink: 0; display: grid; place-items: center; margin-top: 2px;
    }
    .custom-check::after { content: 'âœ”'; font-size: 14px; color: #fff; transform: scale(0); transition: 0.2s; }
    input[type="checkbox"] { display: none; }
    
    input:checked + .custom-check { background: var(--accent); border-color: var(--accent); }
    input:checked + .custom-check::after { transform: scale(1); }
    .answer-option.selected { background: rgba(37, 99, 235, 0.2); border-color: var(--accent); }

    .answer-option.correct { background: rgba(16, 185, 129, 0.15) !important; border-color: var(--correct) !important; }
    .answer-option.correct .custom-check { background: var(--correct) !important; border-color: var(--correct) !important; }

    .answer-option.wrong { background: rgba(239, 68, 68, 0.15) !important; border-color: var(--wrong) !important; animation: shake 0.4s ease; }
    .answer-option.wrong .custom-check { background: var(--wrong) !important; border-color: var(--wrong) !important; }
    .answer-option.wrong .custom-check::after { content: 'âœ–'; }

    .controls { display: flex; gap: 15px; margin-top: auto; }
    .btn { flex: 1; padding: 18px; border-radius: 16px; border: none; font-family: inherit; font-weight: 700; font-size: 1rem; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }
    .btn-primary { background: var(--accent); color: white; box-shadow: 0 4px 0 #1d4ed8; }
    .btn-primary:hover { background: #3b82f6; }
    .btn-learn { background: rgba(245, 158, 11, 0.1); color: var(--warning); border: 1px solid var(--warning); }
    .btn-secondary { background: transparent; border: 2px solid var(--text-muted); color: var(--text-muted); }

    .result-view { text-align: center; padding: 40px 20px; animation: slideUp 0.5s ease; }
    .score-circle { width: 180px; height: 180px; border-radius: 50%; border: 8px solid var(--card-dark); background: conic-gradient(var(--accent) 0%, var(--card-dark) 0%); margin: 0 auto 30px; display: grid; place-items: center; font-size: 3.5rem; font-weight: 800; position: relative; box-shadow: 0 0 30px rgba(37, 99, 235, 0.4); }
    .score-circle::before { content: ''; position: absolute; inset: 10px; background: var(--bg-dark); border-radius: 50%; z-index: -1; }

    .hidden { display: none !important; }
    @keyframes fadeInScale { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
    
    .confetti { position: fixed; width: 10px; height: 10px; background-color: #f00; animation: fall linear forwards; z-index: 100; }
    @keyframes fall { to { transform: translateY(100vh) rotate(720deg); } }
  </style>
</head>
<body>

  <div class="top-bar">
    <a href="index.html" class="back-btn">âœ•</a>
    <div class="streak-container">
      <span id="streak-icon">ðŸ‡ªðŸ‡º</span>
      <span id="streak-count">0</span>
    </div>
  </div>

  <div class="quiz-container" id="quiz-container">
    <div class="timer-wrapper"><div class="timer-bar" id="timer-bar"></div></div>

    <div class="question-card" id="question-card">
      <div class="q-number" id="q-number">ÃŽntrebarea 1</div>
      <p class="q-text" id="q-text">Se Ã®ncarcÄƒ...</p>
      <div class="answers-list" id="answers-list"></div>
    </div>

    <div class="controls">
      <button class="btn btn-learn" id="learn-btn" onclick="triggerLearnMode()">ðŸ‘€ ÃŽnvaÈ›Äƒ</button>
      <button class="btn btn-primary" id="action-btn" onclick="handleAction()">VerificÄƒ</button>
    </div>
  </div>

  <script>
    /* GRILE DREPT INSTITUÈšIONAL EUROPEAN - SoluÈ›ionate */
    const questions = [
      {
        question: "1. Perioada de tranziÈ›ie:",
        answers: ["a) este o excepÈ›ie permanentÄƒ de la aplicarea normelor Uniunii Ã®ntr-un domeniu precis determinat", "b) este o excepÈ›ie cu caracter temporar de la aplicarea normelor comunitare Ã®ntr-un domeniu precis determinat, Ã®nscrisÄƒ Ã®n tratatul de aderare", "c) se stabileÈ™te pentru o duratÄƒ de timp limitatÄƒ"],
        correct: [1, 2] 
      },
      {
        question: "2. Acordurile internaÈ›ionale pot lua diverse forme, printre care:",
        answers: ["a) acorduri de cooperare", "b) acorduri comerciale", "c) acorduri de asociere"],
        correct: [0, 1, 2] // Toate sunt forme valide de acorduri externe ale UE
      },
      {
        question: "3. AtribuÈ›iile bugetare ale Parlamentului European se referÄƒ la:",
        answers: ["a) implicarea Ã®n procedura adoptÄƒrii planului bugetar", "b) descÄƒrcarea cu privire la execuÈ›ia bugetului Uniunii", "c) poate respinge sau modifica cheltuielile din cadrul bugetului Uniunii", "d) faptul cÄƒ Parlamentul are votul definitiv privind bugetul"],
        correct: [0, 1, 2, 3] // DupÄƒ Lisabona, PE are puteri bugetare depline alÄƒturi de Consiliu
      },
      {
        question: "4. Curtea de JustiÈ›ie are competenÈ›e de naturÄƒ:",
        answers: ["a) penalÄƒ", "b) administrativÄƒ", "c) civilÄƒ"],
        correct: [1, 2] // CJUE judecÄƒ legalitatea actelor (admin) È™i litigii civile/comerciale, nu penal direct
      },
      {
        question: "5. Principiul subsidiaritÄƒÈ›ii este consacrat, Ã®n dreptul Uniunii Europene, Ã®n:",
        answers: ["a) Tratatul de la Paris din 1951 instituind C.E.C.O.", "b) Tratatul de la Lisabona", "c) Tratatul asupra Uniunii Europene de la Maastricht"],
        correct: [2] // Introdus formal la Maastricht
      },
      {
        question: "6. Comisia EuropeanÄƒ are atribuÈ›ii precum:",
        answers: ["a) reprezentarea Uniunii Europene pe plan internaÈ›ional (cu excepÈ›ia PESC)", "b) rolul de \"Gardian\" al respectÄƒrii tratatelor", "c) exercitarea funcÈ›iei legislative (iniÈ›iativÄƒ)"],
        correct: [0, 1, 2]
      },
      {
        question: "7. Curtea de Conturi:",
        answers: ["a) membrii CurÈ›ii de Conturi sunt numiÈ›i pentru o perioadÄƒ de zece ani", "b) asigurÄƒ controlul conturilor Uniunii (control financiar)", "c) Ã®n Ã®ndeplinirea Ã®ndatoririlor lor, membrii acceptÄƒ instrucÈ›iuni de la guverne"],
        correct: [1] // Mandatul e de 6 ani (nu 10), sunt independenÈ›i (nu acceptÄƒ instrucÈ›iuni)
      },
      {
        question: "8. CompetenÈ›a de a primi petiÈ›ii (sesizÄƒri) din partea cetÄƒÈ›enilor europeni revine:",
        answers: ["a) CurÈ›ii Europene", "b) Parlamentului European", "c) Ombudsmanului European", "d) Comisiei Europene"],
        correct: [1] // Dreptul la petiÈ›ie e cÄƒtre Parlament
      },
      {
        question: "9. Potrivit tratatului sÄƒu institutiv (Maastricht), Uniunea EuropeanÄƒ a fost consolidatÄƒ pe piloni:",
        answers: ["a) politica externÄƒ È™i de securitate comunÄƒ (Pilonul 2)", "b) cooperarea administrativÄƒ", "c) ComunitÄƒÈ›ile Europene (Pilonul 1)"],
        correct: [0, 2] // Plus JAI (Pilonul 3)
      },
      {
        question: "10. Aplicabilitatea directÄƒ a regulamentului european:",
        answers: ["a) particularii pot invoca imediat normele Ã®n faÈ›a altor particulari (efect orizontal)", "b) particularii pot invoca imediat normele Ã®n faÈ›a autoritÄƒÈ›ilor naÈ›ionale (efect vertical)", "c) implicÄƒ faptul cÄƒ normele genereazÄƒ, Ã®n mod automat, drepturi È™i obligaÈ›ii"],
        correct: [0, 1, 2] // Regulamentul are efect direct complet È™i aplicabilitate imediatÄƒ
      },
      {
        question: "11. CetÄƒÈ›enia europeanÄƒ conferÄƒ o serie de drepturi cetÄƒÈ›enilor europeni, cum sunt:",
        answers: ["a) dreptul de a vota È™i de a candida la alegerile pentru Parlamentul European", "b) dreptul de acces la documentele organismelor Uniunii", "c) dreptul la bunÄƒ administrare", "d) dreptul de a locui È™i de a circula liber pe teritoriul Uniunii"],
        correct: [0, 1, 2, 3]
      },
      {
        question: "12. Banca CentralÄƒ EuropeanÄƒ:",
        answers: ["a) Ã®ndeplineÈ™te funcÈ›ia monetarÄƒ È™i legislativÄƒ", "b) are misiunea de a coordona politica monetarÄƒ pentru zona euro", "c) litigiile cu BCE sunt de competenÈ›a CurÈ›ii de JustiÈ›ie"],
        correct: [1, 2] // Nu are funcÈ›ie legislativÄƒ generalÄƒ
      },
      {
        question: "13. Principiile care guverneazÄƒ relaÈ›ia dreptul UE - dreptul statelor membre sunt:",
        answers: ["a) principiul efectului direct al dreptului UE", "b) principiul complementaritÄƒÈ›ii", "c) principiul prioritÄƒÈ›ii aplicÄƒrii dreptului UE"],
        correct: [0, 2]
      },
      {
        question: "14. ÃŽn decursul evoluÈ›iei Uniunii Europene au aderat la aceasta:",
        answers: ["a) Grecia (1981)", "b) Portugalia, Italia È™i Spania", "c) Marea Britanie, Irlanda, Danemarca È™i Norvegia"],
        correct: [0, 1] // Italia e fondator, Norvegia nu a aderat
      },
      {
        question: "15. Normele dreptului UE prevÄƒd urmÄƒtoarele tipuri de proceduri Ã®n faÈ›a CurÈ›ii de JustiÈ›ie:",
        answers: ["a) recursul È™i apelul subiecÈ›ilor privaÈ›i (limitat)", "b) acÈ›iunea Ã®n constatarea neÃ®ndeplinirii obligaÈ›iilor (infringement)", "c) procedura Ã®ntrebÄƒrilor preliminare"],
        correct: [1, 2]
      },
      {
        question: "16. Europarlamentarilor le revin urmÄƒtoarele obligaÈ›ii/drepturi:",
        answers: ["a) plata primelor de asigurare", "b) obligaÈ›ia de a nu tulbura È™edinÈ›a parlamentarÄƒ", "c) dreptul de a face propuneri legislative (indirect)"],
        correct: [1, 2] // Selectat pe baza logicii, textul original era trunchiat
      },
      {
        question: "17. PreÈ™edinÈ›ia Consiliului are urmÄƒtoarele funcÈ›ii esenÈ›iale:",
        answers: ["a) asigurarea continuÄƒrii activitÄƒÈ›ilor È™i negocierilor", "b) reprezentarea Consiliului cu alte instituÈ›ii È™i internaÈ›ional", "c) organizarea È™i conducerea reuniunilor Consiliului"],
        correct: [0, 1, 2]
      },
      {
        question: "18. Uniunea EuropeanÄƒ (TUE) a fost conceputÄƒ pe piloni:",
        answers: ["a) Cooperarea poliÈ›ieneascÄƒ È™i judiciarÄƒ Ã®n materie penalÄƒ", "b) Politica externÄƒ È™i de securitate comunÄƒ (PESC)", "c) ComunitÄƒÈ›ile Europene", "d) Ã®nfiinÈ›area instituÈ›iilor europene"],
        correct: [0, 1, 2]
      },
      {
        question: "19. Comisia EuropeanÄƒ are ca principale atribuÈ›ii:",
        answers: ["a) analiza propunerilor cetÄƒÈ›enilor", "b) aplicarea legislaÈ›iei Uniunii (executiv)", "c) aplicarea politicilor Uniunii"],
        correct: [1, 2]
      },
      {
        question: "20. Consiliul are urmÄƒtoarele atribuÈ›ii fundamentale:",
        answers: ["a) partajeazÄƒ puterea legislativÄƒ cu Parlamentul", "b) asigurÄƒ coordonarea politicilor economice generale", "c) este responsabil cu execuÈ›ia bugetului (Ã®mpreunÄƒ cu PE)"],
        correct: [0, 1, 2]
      },
      {
        question: "21. Tratatul asupra Uniunii Europene (Maastricht):",
        answers: ["a) a introdus construcÈ›ia pe trei piloni", "b) are ca obiectiv crearea uniunii economice È™i monetare", "c) a schimbat denumirea CEE Ã®n Comunitatea EuropeanÄƒ", "d) Mai este cunoscut È™i ca Tratatul de la Maastricht"],
        correct: [0, 1, 2, 3]
      },
      {
        question: "22. Curtea EuropeanÄƒ de Conturi:",
        answers: ["a) membrii sunt numiÈ›i de Comisie", "b) este o instituÈ›ie de control financiar extern", "c) adoptÄƒ avize sau rapoarte anuale", "d) membrii sunt numiÈ›i de Consiliu"],
        correct: [1, 2, 3]
      },
      {
        question: "23. Consiliul Uniunii Europene reprezintÄƒ:",
        answers: ["a) interesele statelor membre", "b) interesele Uniunii Europene", "c) interesele cetÄƒÈ›enilor"],
        correct: [0] // Comisia reprezintÄƒ UE, PE cetÄƒÈ›enii
      },
      {
        question: "24. Consiliul are competenÈ›e precum:",
        answers: ["a) Ã®ncheie acordurile internaÈ›ionale ale UE", "b) punerea Ã®n aplicare a PESC", "c) atribuÈ›ii de control"],
        correct: [0, 1]
      },
      {
        question: "25. Tratatul de la Maastricht (1992) a avut ca obiective:",
        answers: ["a) realizarea uniunii monetare (EURO)", "b) politica externÄƒ È™i de securitate comunÄƒ", "c) crearea unei uniuni economice È™i politice"],
        correct: [0, 1, 2]
      },
      {
        question: "26. Este Ã®n competenÈ›a Consiliului:",
        answers: ["a) politica externÄƒ È™i de securitate comunÄƒ", "b) adoptarea de acte juridice normative (cu PE)", "c) politica privind afacerile interne È™i justiÈ›ia", "d) definirea politicilor Uniunii"],
        correct: [0, 1, 2, 3]
      },
      {
        question: "27. ActivitÄƒÈ›ile Parlamentului European se desfÄƒÈ™oarÄƒ la:",
        answers: ["a) Luxembourg (Secretariat)", "b) Strasbourg (Sediul oficial, plenare)", "c) Bruxelles (Comisii, mini-sesiuni)"],
        correct: [0, 1, 2]
      },
      {
        question: "28. FuncÈ›ia executivÄƒ la nivelul Uniunii aparÈ›ine, Ã®n principal:",
        answers: ["a) CurÈ›ii de Conturi", "b) Comisiei Europene", "c) Consiliului", "d) Parlamentului European"],
        correct: [1]
      },
      {
        question: "29. CompetenÈ›a jurisdicÈ›ionalÄƒ vizeazÄƒ:",
        answers: ["a) adoptarea de acte", "b) activitatea de soluÈ›ionare a litigiilor (CJUE)", "c) punerea Ã®n aplicare a legislaÈ›iei"],
        correct: [1]
      },
      {
        question: "30. Principiul subsidiaritÄƒÈ›ii vizeazÄƒ:",
        answers: ["a) UE intervine doar dacÄƒ obiectivele nu pot fi realizate suficient de statele membre (competenÈ›e partajate)", "b) nivelul de putere", "c) proporÈ›ionalitatea acÈ›iunii"],
        correct: [0]
      },
      {
        question: "31. Curtea de Conturi:",
        answers: ["a) se reuneÈ™te Ã®n colegiu", "b) domenii de responsabilitate", "c) este organizatÄƒ Ã®n camere"],
        correct: [2]
      },
      {
        question: "32. Dreptul primar al UE este:",
        answers: ["a) fundamentat pe tratatele originare (constitutive)", "b) norme emise Ã®n baza tratatelor (derivate)", "c) constituit din tratate constitutive, modificatoare È™i de aderare"],
        correct: [0, 2]
      },
      {
        question: "33. ÃŽn procesul de iniÈ›iere È™i adoptare a bugetului participÄƒ:",
        answers: ["a) Consiliul Uniunii Europene", "b) Comisia EuropeanÄƒ (proiect)", "c) Parlamentul European"],
        correct: [0, 1, 2]
      },
      {
        question: "34. Au calitate de state fondatoare:",
        answers: ["a) Germania, Belgia, Luxemburg", "b) FranÈ›a, Olanda, Italia", "c) Austria, Germania, Italia"],
        correct: [0, 1] // Austria a aderat Ã®n 1995
      },
      {
        question: "35. Care afirmaÈ›ii referitoare la Tribunalul UE sunt adevÄƒrate?",
        answers: ["a) are Ã®n componenÈ›Äƒ judecÄƒtori", "b) soluÈ›ioneazÄƒ doar recursurile", "c) a luat fiinÈ›Äƒ Ã®n 1989 (TPI)"],
        correct: [0, 2]
      },
      {
        question: "36. Izvoarele derivate ale Uniunii sunt:",
        answers: ["a) Acordul Schengen", "b) Regulamentul", "c) Actul Unic (Primar)", "d) Directiva"],
        correct: [1, 3]
      },
      {
        question: "37. Deciziile Ã®n cadrul PESC sunt stabilite/definite de:",
        answers: ["a) Consiliul Europei (Nu e instituÈ›ie UE)", "b) Consiliul UE (implementeazÄƒ)", "c) Consiliul European (defineÈ™te direcÈ›iile)"],
        correct: [1, 2] // Consiliul European traseazÄƒ liniile, Consiliul ia deciziile formale
      },
      {
        question: "38. ÃŽntrebÄƒrile parlamentarilor europeni:",
        answers: ["a) mijloc de control asupra Comisiei/Consiliului", "b) pot fi scrise", "c) pot fi orale", "d) sunt publicate Ã®n Jurnalul Oficial"],
        correct: [0, 1, 2, 3]
      },
      {
        question: "39. Concluziile avocaÈ›ilor generali:",
        answers: ["a) fac parte din procedurÄƒ", "b) nu sunt publice", "c) sunt publicate Ã®mpreunÄƒ cu hotÄƒrÃ¢rea CurÈ›ii"],
        correct: [0, 2]
      },
      {
        question: "40. Prin Tratatul de la Amsterdam (1997):",
        answers: ["a) Uniunea MonetarÄƒ (Maastricht)", "b) modificarea ponderii voturilor", "c) extinderea procedurii codeciziei"],
        correct: [2]
      },
      {
        question: "41. NoÈ›iunea de 'extindere' a UE:",
        answers: ["a) cantitativ: noi state membre", "b) extinderea zonei euro", "c) calitativ: lÄƒrgirea domeniilor de competenÈ›Äƒ"],
        correct: [0, 2]
      },
      {
        question: "42. ÃŽn evoluÈ›ia UE au existat (pÃ¢nÄƒ recent):",
        answers: ["a) cinci valuri", "b) È™apte valuri", "c) trei valuri"],
        correct: [1] // 73, 81, 86, 95, 04, 07, 13
      },
      {
        question: "43. CompetenÈ›a de control politic asupra executivului UE revine:",
        answers: ["a) Comisiei", "b) CurÈ›ii de JustiÈ›ie", "c) Consiliului European", "d) Parlamentului European"],
        correct: [3]
      },
      {
        question: "44. Sunt incluse Ã®n categoria izvoarelor derivate:",
        answers: ["a) tratatele (Primar)", "b) regulamentul È™i directivele", "c) deciziile"],
        correct: [1, 2]
      },
      {
        question: "45. Care reprezintÄƒ instituÈ›ii ale Uniunii Europene:",
        answers: ["a) Consiliul European", "b) Consiliul de ApÄƒrare (Inexistent ca instituÈ›ie UE)"],
        correct: [0]
      }
    ];

    let currentQ = 0;
    let correctCount = 0;
    let streak = 0;
    let isAnswered = false;

    const qText = document.getElementById("q-text");
    const qNum = document.getElementById("q-number");
    const answersList = document.getElementById("answers-list");
    const actionBtn = document.getElementById("action-btn");
    const learnBtn = document.getElementById("learn-btn");
    const streakEl = document.getElementById("streak-count");
    const timerBar = document.getElementById("timer-bar");

    function initQuiz() {
      currentQ = 0;
      correctCount = 0;
      streak = 0;
      updateStreakUI();
      loadQuestion();
    }

    function loadQuestion() {
      isAnswered = false;
      actionBtn.innerText = "VERIFICÄ‚";
      actionBtn.onclick = handleAction;
      actionBtn.style.display = "block";
      learnBtn.style.display = "block";
      
      timerBar.style.transition = "none";
      timerBar.style.transform = "scaleX(1)";
      setTimeout(() => {
        timerBar.style.transition = "transform 60s linear";
        timerBar.style.transform = "scaleX(0)";
      }, 100);

      const q = questions[currentQ];
      qNum.innerText = `ÃŽntrebarea ${currentQ + 1} / ${questions.length}`;
      qText.innerText = q.question;
      
      answersList.innerHTML = "";
      
      q.answers.forEach((ans, i) => {
        const div = document.createElement("label");
        div.className = "answer-option";
        div.innerHTML = `
          <input type="checkbox" name="ans" value="${i}">
          <div class="custom-check"></div>
          <span class="ans-text">${ans}</span>
        `;
        div.querySelector("input").addEventListener("change", function() {
          if(this.checked) div.classList.add("selected");
          else div.classList.remove("selected");
        });
        answersList.appendChild(div);
      });
    }

    function handleAction() {
      if (!isAnswered) {
        checkAnswer();
      } else {
        nextQuestion();
      }
    }

    function checkAnswer() {
      const checked = Array.from(document.querySelectorAll('input[name="ans"]:checked'));
      if (checked.length === 0) return; 

      isAnswered = true;
      const userIdx = checked.map(c => parseInt(c.value)).sort();
      const correctIdx = questions[currentQ].correct.slice().sort();

      const isCorrect = JSON.stringify(userIdx) === JSON.stringify(correctIdx);

      document.querySelectorAll("input").forEach(i => i.disabled = true);
      document.querySelectorAll(".answer-option").forEach(opt => opt.style.pointerEvents = "none");

      const options = document.querySelectorAll(".answer-option");
      options.forEach((opt, i) => {
        const input = opt.querySelector("input");
        if (correctIdx.includes(i)) opt.classList.add("correct");
        if (input.checked && !correctIdx.includes(i)) opt.classList.add("wrong");
      });

      if (isCorrect) {
        correctCount++;
        streak++;
        actionBtn.innerText = "CORECT! CONTINUÄ‚";
        actionBtn.style.background = "var(--correct)";
      } else {
        streak = 0;
        actionBtn.innerText = "GREÈ˜IT... CONTINUÄ‚";
        actionBtn.style.background = "var(--wrong)";
      }

      updateStreakUI();
      actionBtn.onclick = nextQuestion;
      learnBtn.style.display = "none";
    }

    function triggerLearnMode() {
      isAnswered = true;
      const correctIdx = questions[currentQ].correct;
      document.querySelectorAll(".answer-option").forEach((opt, i) => {
        if (correctIdx.includes(i)) opt.classList.add("correct");
        opt.style.pointerEvents = "none";
        opt.querySelector("input").disabled = true;
      });
      streak = 0;
      updateStreakUI();
      actionBtn.innerText = "URMÄ‚TOAREA";
      actionBtn.style.background = "var(--accent)";
      actionBtn.onclick = nextQuestion;
      learnBtn.style.display = "none";
    }

    function nextQuestion() {
      currentQ++;
      actionBtn.style.background = "var(--accent)";
      if (currentQ < questions.length) {
        loadQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      const percent = Math.round((correctCount / questions.length) * 100);
      const container = document.getElementById("quiz-container");
      if(percent >= 50) fireConfetti();
      let msg = percent > 80 ? "Expert UE! ðŸ‡ªðŸ‡º" : "Mai citeÈ™te tratatele! ðŸ“œ";

      container.innerHTML = `
        <div class="result-view">
          <div class="score-circle"><span style="z-index:2; color:white;">${percent}%</span></div>
          <h1 style="margin:0;">${msg}</h1>
          <p style="color:var(--text-muted); font-size:1.2rem; margin-top:10px;">Scor: ${correctCount} / ${questions.length}</p>
          <div class="controls" style="margin-top:40px;">
             <button class="btn btn-secondary" onclick="location.href='index.html'">Meniu</button>
             <button class="btn btn-primary" onclick="location.reload()">Din Nou</button>
          </div>
        </div>
      `;
    }

    function updateStreakUI() {
      streakEl.innerText = streak;
      if(streak > 2) streakEl.parentElement.style.background = "rgba(251, 191, 36, 0.4)";
      else streakEl.parentElement.style.background = "rgba(251, 191, 36, 0.15)";
    }

    function fireConfetti() {
      const colors = ['#2563eb', '#fbbf24', '#ffffff'];
      for (let i = 0; i < 50; i++) {
        const conf = document.createElement('div');
        conf.className = 'confetti';
        conf.style.left = Math.random() * 100 + 'vw';
        conf.style.top = -10 + 'px';
        conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        conf.style.animationDuration = (Math.random() * 3 + 2) + 's';
        document.body.appendChild(conf);
      }
    }

    initQuiz();
  </script>
</body>
</html>