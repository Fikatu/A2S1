<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>DIE Extra - Ultra Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg-dark: #0f172a;
      --card-dark: #1e293b;
      /* TemƒÉ Albastru/Galben UE */
      --accent: #2563eb; 
      --accent-glow: #fbbf24;
      --correct: #10b981;
      --wrong: #ef4444;
      --warning: #f59e0b;
      --text-main: #f8fafc;
      --text-muted: #94a3b8;
      --radius: 24px;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      margin: 0; padding: 0; font-family: 'Outfit', sans-serif;
      background-color: var(--bg-dark); color: var(--text-main);
      min-height: 100vh; display: flex; flex-direction: column; align-items: center; overflow-x: hidden;
      background-image: radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.15) 0%, transparent 25%),
                        radial-gradient(circle at 90% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 25%);
    }

    /* --- TOP BAR --- */
    .top-bar { width: 100%; max-width: 700px; padding: 20px; display: flex; justify-content: space-between; align-items: center; z-index: 10; position: relative; }
    .back-btn { background: rgba(255,255,255,0.1); border: none; color: var(--text-main); width: 44px; height: 44px; border-radius: 12px; font-size: 1.2rem; cursor: pointer; display: grid; place-items: center; text-decoration: none; }
    
    .nav-mini-container { display: flex; gap: 15px; position: absolute; left: 50%; transform: translateX(-50%); z-index: 999; }
    .btn-nav-mini { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.15); color: var(--text-main); width: 44px; height: 44px; border-radius: 12px; cursor: pointer; display: grid; place-items: center; font-size: 1.2rem; backdrop-filter: blur(5px); }
    .btn-nav-mini:disabled { opacity: 0.3; cursor: not-allowed; }

    .streak-container { display: flex; align-items: center; gap: 6px; background: rgba(251, 191, 36, 0.15); color: #fbbf24; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 0.9rem; border: 1px solid rgba(251, 191, 36, 0.3); }

    /* --- QUIZ --- */
    .quiz-container { width: 100%; max-width: 650px; flex: 1; display: flex; flex-direction: column; padding: 10px 20px 40px; position: relative; }
    .timer-wrapper { width: 100%; height: 6px; background: #334155; border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
    .timer-bar { height: 100%; width: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-glow)); border-radius: 10px; transform-origin: left; }

    .question-card { background: var(--card-dark); border-radius: var(--radius); padding: 30px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.05); margin-bottom: 20px; animation: fadeInScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
    .q-number { color: var(--text-muted); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 10px; font-weight: 700; }
    .q-text { font-size: 1.25rem; line-height: 1.5; font-weight: 600; margin: 0 0 15px 0; }

    .answers-list { display: flex; flex-direction: column; gap: 12px; }
    .answer-option { position: relative; background: rgba(255,255,255,0.03); border: 2px solid rgba(255,255,255,0.08); padding: 18px 20px; border-radius: 16px; cursor: pointer; display: flex; align-items: flex-start; gap: 15px; font-size: 1rem; }
    
    .custom-check { width: 24px; height: 24px; border: 2px solid var(--text-muted); border-radius: 8px; flex-shrink: 0; display: grid; place-items: center; margin-top: 2px; }
    .custom-check::after { content: '‚úî'; font-size: 14px; color: #fff; transform: scale(0); transition: 0.2s; }
    input[type="checkbox"] { display: none; }
    input:checked + .custom-check { background: var(--accent); border-color: var(--accent); }
    input:checked + .custom-check::after { transform: scale(1); }

    .answer-option.selected { background: rgba(37, 99, 235, 0.15); border-color: var(--accent); }
    .answer-option.correct { background: rgba(16, 185, 129, 0.15) !important; border-color: var(--correct) !important; }
    .answer-option.wrong { background: rgba(239, 68, 68, 0.15) !important; border-color: var(--wrong) !important; }

    .controls { display: flex; gap: 15px; margin-top: auto; }
    .btn { flex: 1; padding: 18px; border-radius: 16px; border: none; font-family: inherit; font-weight: 700; font-size: 1rem; cursor: pointer; text-transform: uppercase; }
    .btn-primary { background: var(--accent); color: white; }
    .btn-learn { background: rgba(251, 191, 36, 0.1); color: var(--warning); border: 1px solid var(--warning); }

    .result-view { text-align: center; padding: 40px 20px; animation: slideUp 0.5s ease; }
    .score-circle { width: 180px; height: 180px; border-radius: 50%; border: 8px solid var(--card-dark); background: conic-gradient(var(--accent) 0%, var(--card-dark) 0%); margin: 0 auto 30px; display: grid; place-items: center; font-size: 3.5rem; font-weight: 800; position: relative; box-shadow: 0 0 30px rgba(37, 99, 235, 0.4); }
    .score-circle::before { content: ''; position: absolute; inset: 10px; background: var(--bg-dark); border-radius: 50%; z-index: -1; }

    @keyframes fadeInScale { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
    .confetti { position: fixed; width: 10px; height: 10px; background-color: #f00; animation: fall linear forwards; z-index: 100; }
    @keyframes fall { to { transform: translateY(100vh) rotate(720deg); } }
  </style>
</head>
<body>

  <div class="top-bar">
    <a href="hub_die.html" class="back-btn">‚úï</a>
    <div class="nav-mini-container">
      <button class="btn-nav-mini" id="prev-btn" onclick="prevQuestion()">‚¨ÖÔ∏è</button>
      <button class="btn-nav-mini" id="next-btn" onclick="nextQuestion()">‚û°Ô∏è</button>
    </div>
    <div class="streak-container">
      <span id="streak-icon">‚≠ê</span>
      <span id="streak-count">0</span>
    </div>
  </div>

  <div class="quiz-container" id="quiz-container">
    <div class="timer-wrapper"><div class="timer-bar" id="timer-bar"></div></div>
    <div class="question-card" id="question-card">
      <div class="q-number" id="q-number">√éntrebarea 1</div>
      <p class="q-text" id="q-text">Se √ÆncarcƒÉ...</p>
      <div class="answers-list" id="answers-list"></div>
    </div>
    <div class="controls">
      <button class="btn btn-learn" id="learn-btn" onclick="triggerLearnMode()">üëÄ √énva»õƒÉ</button>
      <button class="btn btn-primary" id="action-btn" onclick="handleAction()">VERIFICƒÇ</button>
    </div>
  </div>

  <script>
    /* GRILE DIE EXTRA - Solu»õionate */
    const questions = [
      {
        question: "46. Pre»ôedin»õia Consiliului are mai multe func»õii:",
        answers: ["PregƒÉtirea pre»ôedin»õiei urmƒÉtoare pentru a prelua negocierea √Æn curs", "Organizarea reuniunilor Consiliului »ôi a grupurilor sale de lucru", "Asigurarea continuƒÉrii activitƒÉ»õilor »ôi a negocierilor √Æn curs √Æncepute √Æn timpul pre»ôedin»õiei precedente", "Conducerea reuniunilor Consiliului »ôi a grupurilor sale de lucru"],
        correct: [0, 1, 2, 3] 
      },
      {
        question: "47. Criteriile pe care trebuie sƒÉ le √ÆndeplineascƒÉ o dispozi»õie comunitarƒÉ pentru a i se recunoa»ôte efectul direct sunt:",
        answers: ["Claritatea", "Neafectarea de condi»õii", "Obiectivitatea", "Precizie"],
        correct: [0, 1, 3] // Conform jurispruden»õei Van Gend en Loos (Clar, Precis, Necondi»õionat)
      },
      {
        question: "48. Regulamentul European este un act normativ:",
        answers: ["Care trebuie transpus pentru a fi opozabil ter»õilor", "General", "GenereazƒÉ √Æn mod automat drepturi »ôi obliga»õii pentru particulari dar »ôi pentru state", "Obligatoriu √Æn toate elementele sale"],
        correct: [1, 2, 3] // A e fals, regulamentul NU se transpune
      },
      {
        question: "49. Deciziile √Æn cadrul Politicii Externe »ôi de Securitate ComunƒÉ sunt stabilite de:",
        answers: ["Consiliul Europei", "Consiliul European (define»ôte principiile)", "Consiliul Uniunii Europene (ia deciziile)"],
        correct: [1, 2] 
      },
      {
        question: "50. Actele juridice cu caracter facultativ de la nivelul Uniunii sunt:",
        answers: ["RecomandƒÉrile", "Directivele", "Deciziile", "Avizele"],
        correct: [0, 3] // Directivele »ôi Deciziile sunt obligatorii
      },
      {
        question: "51. Procedura de aderare la Uniunea EuropeanƒÉ presupune parcurgerea urmƒÉtoarelor etape:",
        answers: ["Etapa de aderare propriu-zisƒÉ", "Etapa de preaderare", "Etapa cu caracter interna»õional", "Etapa comunitarƒÉ"],
        correct: [1, 2, 3]
      },
      {
        question: "52. Actualmente func»õia jurisdic»õionalƒÉ la nivelul Uniunii Europene este exercitatƒÉ de:",
        answers: ["Comisia EuropeanƒÉ", "Parlamentul European", "Curtea de Justi»õie", "Tribunalul", "Tribunalul Func»õiei Publice (istoric)"],
        correct: [2, 3, 4] 
      },
      {
        question: "54. √én varianta sa originalƒÉ, Tratatul UE a intrat √Æn vigoare la 1 noiembrie 1993 »ôi a fost modificat succesiv prin:",
        answers: ["Tratatul de la Lisabona", "Tratatul de la Amsterdam", "Tratatul de la Nisa", "Actul Unic European"],
        correct: [0, 1, 2] // Actul Unic a fost √Ænainte de Maastricht
      },
      {
        question: "55. Principiul specializƒÉrii Uniunii Europene se referƒÉ la faptul cƒÉ:",
        answers: ["Se mai nume»ôte »ôi principiul atribuirii competen»õei", "Este √Æn deplin acord cu teoria puterilor implicite consacratƒÉ de jurispruden»õa Cur»õii", "Uniunea ac»õioneazƒÉ √Æn limitele competen»õelor ce i-au fost atribuite de cƒÉtre statele membre pentru atingerea obiectivelor fixate √Æn tratate"],
        correct: [0, 2] 
      },
      {
        question: "56. CetƒÉ»õenia europeanƒÉ conferƒÉ o serie de drepturi cetƒÉ»õenilor europeni, cum sunt:",
        answers: ["Dreptul de a vota »ôi de a candida la alegerile pentru Parlamentul European", "Dreptul de a avea acces la documentele organismelor Uniunii", "Dreptul la bunƒÉ administrare", "Dreptul de a locui »ôi de a circula liber pe teritoriul Uniunii"],
        correct: [0, 1, 2, 3]
      },
      {
        question: "57. Pre»ôedin»õia Consiliului are urmƒÉtoarele func»õii:",
        answers: ["Asigurarea continuƒÉrii activitƒÉ»õilor »ôi a negocierilor √Æn curs √Æncepute √Æn timpul pre»ôedin»õiei precedente", "Elaborarea de compromisuri susceptibile de a rezolva problemele existente", "Organizarea »ôi conducerea reuniunilor Consiliului »ôi a grupurilor sale de lucru", "Reprezentarea Consiliului at√¢t √Æn activitatea sa cu alte institu»õii UE, c√¢t »ôi la nivel interna»õional"],
        correct: [0, 1, 2, 3]
      },
      {
        question: "58. Caracterul autoreferen»õial al dreptului UE se referƒÉ la faptul cƒÉ:",
        answers: ["Dreptul UE depinde, pentru validarea sa, de dreptul interna»õional", "Dreptul UE nu depinde, pentru validarea sa, nici de dreptul na»õional", "Dreptul UE are origine independentƒÉ"],
        correct: [1, 2] // Autonomia dreptului UE
      },
      {
        question: "59. Potrivit tratatului sƒÉu institutiv, UE a fost consolidatƒÉ pe piloni:",
        answers: ["Cooperarea administrativƒÉ »ôi √Æn domeniul funciar", "ComunitƒÉ»õile Europene (Pilonul 1)", "Politica externƒÉ »ôi de securitate comunƒÉ (Pilonul 2)"],
        correct: [1, 2]
      },
      {
        question: "60. Sunt incluse √Æn categoria izvoarelor derivate de drept European:",
        answers: ["Deciziile", "Tratatele constitutive »ôi tratatele modificatoare (Drept Primar)", "Regulamentul »ôi directivele europene"],
        correct: [0, 2]
      },
      {
        question: "61. Tratatului de la Nisa (2001) √Æi sunt atribuite merite importante, precum:",
        answers: ["Eliminarea ultimelor obstacole din calea liberei circula»õii", "Deschiderea unei dezbateri post‚ÄìNisa despre cum va arƒÉta UE √Æn viitor", "Eliminarea tuturor obstacolelor √Æn calea extinderii"],
        correct: [1] // Declara»õia privind viitorul Europei
      },
      {
        question: "62. CetƒÉ»õenia Uniunii prezintƒÉ unele caracteristici:",
        answers: ["√énlocuie»ôte cetƒÉ»õenia na»õionalƒÉ", "ConferƒÉ anumite drepturi", "Nu √Ænlocuie»ôte cetƒÉ»õenia na»õionalƒÉ, ci se adaugƒÉ acesteia"],
        correct: [1, 2]
      },
      {
        question: "63. Comisia EuropeanƒÉ √ÆnglobeazƒÉ:",
        answers: ["Elemente de suprana»õionalism", "Elemente de interguvernamentalism", "Nicio variantƒÉ"],
        correct: [0] // Comisia apƒÉrƒÉ interesul UE, deci e suprana»õionalƒÉ
      },
      {
        question: "64. Comisia EuropeanƒÉ √Æn ansamblu poate fi demisƒÉ de cƒÉtre:",
        answers: ["Curtea de Justi»õie", "Consiliul European", "Parlamentul European (prin mo»õiune de cenzurƒÉ)"],
        correct: [2]
      },
      {
        question: "65. Organele de lucru ale Parlamentului European sunt:",
        answers: ["Grupurile politice", "Delega»õiile de specialitate", "Comisiile parlamentare"],
        correct: [0, 1, 2]
      },
      {
        question: "66. Prin prevederile Tratatului de la Nisa (2001) la nivelul Comisiei Europene s-au propus modificƒÉri, precum:",
        answers: ["Caracterul suprana»õional al Comisiei a fost accentuat odatƒÉ cu schimbarea intervenitƒÉ cu privire la numirea pre»ôedintelui »ôi a membrilor comisiei (majoritate calificatƒÉ)", "Comisia are competen»õa sƒÉ aprobe statutul deputa»õilor europeni", "Pre»ôedintele Comisiei poate numi vicepre»ôedin»õii Comisiei, fƒÉrƒÉ aprobarea colegiului"],
        correct: [0, 2]
      },
      {
        question: "67. Func»õia jurisdic»õionalƒÉ apar»õine:",
        answers: ["Ombudsmanului European", "Tribunalului", "Parlamentului", "Cur»õii de Justi»õie"],
        correct: [1, 3]
      },
      {
        question: "68. Consiliul:",
        answers: ["√én vederea realizƒÉrii activitƒÉ»õilor sale specifice este ajutat de mai multe organisme »ôi organe auxiliare (COREPER)", "Este compus din reprezentan»õi de nivel ministerial din fiecare stat membru", "Structura sa diferƒÉ √Æn func»õie de domeniul concret vizat prin ordinea de zi"],
        correct: [0, 1, 2]
      },
      {
        question: "69. Acordul de la Schengen a avut ca scop:",
        answers: ["Crearea UE", "√énlƒÉturarea gradatƒÉ a controlului vamal la frontierele comune", "Reformarea institu»õiilor comunitƒÉ»õilor europene"],
        correct: [1]
      },
      {
        question: "70. Directiva are aplicabilitate directƒÉ:",
        answers: ["DacƒÉ include dispozi»õii clare, fƒÉrƒÉ interpretƒÉri", "DacƒÉ include reglementƒÉri fƒÉrƒÉ condi»õii »ôi termene", "√én toate situa»õiile", "DacƒÉ nu a fost transpusƒÉ √Æn legisla»õia na»õionalƒÉ (√Æn termenul prevƒÉzut)"],
        correct: [0, 1, 3]
      },
      {
        question: "71. √én cadrul Consiliului, prin tratatele constitutive sunt reglementate urmƒÉtoarele modalitƒÉ»õi de vot:",
        answers: ["Majoritatea calificatƒÉ", "Vot direct, secret »ôi liber exprimat", "Majoritatea simplƒÉ"],
        correct: [0, 2] // Plus unanimitatea (nelistatƒÉ)
      },
      {
        question: "72. Compromisul de la Luxemburg:",
        answers: ["Se referƒÉ la reluarea locului √Æn Consiliu a Fran»õei", "Se referƒÉ la reluarea locului √Æn Consiliu a Germaniei", "A avut ca efect men»õinerea regulii unanimitƒÉ»õii atunci c√¢nd sunt √Æn discu»õie interese foarte importante", "A intervenit dupƒÉ 6 luni de la practicarea politicii 'scaunului gol'"],
        correct: [0, 2, 3]
      },
      {
        question: "73. √én procesul de perfectare a organizƒÉrii »ôi func»õionƒÉrii UE, au apƒÉrut ca organe urmƒÉtoarele:",
        answers: ["Comitetul Regiunilor", "Banca EuropeanƒÉ de Investi»õii", "Ombudsmanul European", "Curtea de Conturi", "Comitetul Economic »ôi Social"],
        correct: [0, 1, 2, 3, 4]
      },
      {
        question: "74. Principiul cooperƒÉrii loiale vizeazƒÉ unele aspecte:",
        answers: ["Uniunea »ôi statele membre se respectƒÉ »ôi se ajutƒÉ reciproc √Æn √Ændeplinirea misiunilor care decurg din tratate", "Statele membre faciliteazƒÉ √Ændeplinirea de cƒÉtre Uniune a misiunii sale", "Statele membre adoptƒÉ orice mƒÉsurƒÉ pentru asigurarea √Ændeplinirii obliga»õiilor care rezultƒÉ din actele institu»õiilor"],
        correct: [0, 1, 2]
      }
    ];

    /* --- LOGICA AMESTEC & NAVIGARE --- */
    let currentQ = 0; let totalScore = 0; let streak = 0;
    let shuffledQuestions = []; let quizState = []; 

    const qText = document.getElementById("q-text");
    const qNum = document.getElementById("q-number");
    const answersList = document.getElementById("answers-list");
    const actionBtn = document.getElementById("action-btn");
    const learnBtn = document.getElementById("learn-btn");
    const streakEl = document.getElementById("streak-count");
    const timerBar = document.getElementById("timer-bar");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function initQuiz() {
      currentQ = 0; totalScore = 0; streak = 0;
      shuffledQuestions = JSON.parse(JSON.stringify(questions));
      shuffleArray(shuffledQuestions);
      quizState = new Array(shuffledQuestions.length).fill(null);
      updateStreakUI();
      loadQuestion();
    }

    function loadQuestion() {
      prevBtn.disabled = (currentQ === 0);
      nextBtn.disabled = (currentQ === shuffledQuestions.length - 1);
      
      timerBar.style.transition = "none"; timerBar.style.transform = "scaleX(1)";
      setTimeout(() => { timerBar.style.transition = "transform 60s linear"; timerBar.style.transform = "scaleX(0)"; }, 100);

      const q = shuffledQuestions[currentQ];
      // CurƒÉ»õƒÉm numerele din textul √ÆntrebƒÉrii (ex "46.") pentru cƒÉ avem numƒÉrƒÉtor sus
      let cleanQ = q.question.replace(/^\d+[\.\)]\s*/, '');
      qNum.innerText = `√éntrebarea ${currentQ + 1} / ${shuffledQuestions.length}`;
      qText.innerText = cleanQ;
      answersList.innerHTML = "";

      let currentState = quizState[currentQ];
      if (!currentState) {
        let answerPairs = q.answers.map((text, idx) => ({ text: text, originalIdx: idx }));
        shuffleArray(answerPairs);
        currentState = { answered: false, answerOrder: answerPairs, selectedIdx: [], btnText: "VERIFICƒÇ", btnColor: "var(--accent)" };
        quizState[currentQ] = currentState;
      }

      actionBtn.innerText = currentState.btnText;
      actionBtn.style.background = currentState.btnColor;
      if (currentState.answered) { actionBtn.onclick = () => nextQuestion(); learnBtn.style.display = "none"; }
      else { actionBtn.onclick = handleAction; learnBtn.style.display = "block"; }

      const letters = ['a', 'b', 'c', 'd', 'e', 'f'];
      currentState.answerOrder.forEach((pair, domIndex) => {
        const div = document.createElement("label");
        div.className = "answer-option";
        
        // CurƒÉ»õare text rƒÉspuns (scoate "a)")
        let cleanText = pair.text.replace(/^[a-zA-Z0-9]+[\.\)]\s*/, '');
        let label = letters[domIndex] + ") ";
        let isChecked = currentState.selectedIdx.includes(pair.originalIdx);

        div.innerHTML = `<input type="checkbox" name="ans" value="${pair.originalIdx}" ${isChecked ? "checked" : ""}><div class="custom-check"></div><span class="ans-text"><b>${label}</b>${cleanText}</span>`;

        if (currentState.answered) {
            div.style.pointerEvents = "none"; div.querySelector("input").disabled = true;
            if (q.correct.includes(pair.originalIdx)) div.classList.add("correct");
            if (isChecked && !q.correct.includes(pair.originalIdx)) div.classList.add("wrong");
        } else {
            div.querySelector("input").addEventListener("change", function() { if(this.checked) div.classList.add("selected"); else div.classList.remove("selected"); });
        }
        if (isChecked && !currentState.answered) div.classList.add("selected");
        answersList.appendChild(div);
      });
    }

    function handleAction() { checkAnswer(); }

    function checkAnswer() {
      const checked = Array.from(document.querySelectorAll('input[name="ans"]:checked'));
      if (checked.length === 0) return; 
      
      const userIdx = checked.map(c => parseInt(c.value));
      const correctIdx = shuffledQuestions[currentQ].correct;
      let correctSelected = 0; let wrongSelected = 0;

      userIdx.forEach(idx => { if (correctIdx.includes(idx)) correctSelected++; else wrongSelected++; });
      let ratio = (correctSelected - wrongSelected) / correctIdx.length;
      if (ratio < 0) ratio = 0;

      const points = ratio * (10 / shuffledQuestions.length);
      totalScore += points;

      let btnText, btnColor;
      if (ratio === 1) { streak++; btnText = "CORECT! üëè"; btnColor = "var(--correct)"; setTimeout(() => { if(currentQ < shuffledQuestions.length - 1) nextQuestion(); }, 1000); }
      else { streak = 0; btnText = ratio > 0 ? `PAR»öIAL: +${points.toFixed(2)}p` : "GRE»òIT: 0p"; btnColor = ratio > 0 ? "var(--warning)" : "var(--wrong)"; }

      quizState[currentQ].answered = true; quizState[currentQ].selectedIdx = userIdx;
      quizState[currentQ].btnText = btnText; quizState[currentQ].btnColor = btnColor;
      updateStreakUI(); loadQuestion();
    }

    function triggerLearnMode() {
      quizState[currentQ] = { ...quizState[currentQ], answered: true, selectedIdx: [], btnText: "√éNVƒÇ»öARE", btnColor: "var(--accent)" };
      streak = 0; updateStreakUI(); loadQuestion();
    }

    function prevQuestion() { if (currentQ > 0) { currentQ--; loadQuestion(); } }
    function nextQuestion() { if (currentQ < shuffledQuestions.length - 1) { currentQ++; loadQuestion(); } else { showResults(); } }

    function showResults() {
      const container = document.getElementById("quiz-container");
      const finalGrade = totalScore.toFixed(2);
      if(totalScore >= 5) fireConfetti();
      container.innerHTML = `<div class="result-view"><div class="score-circle"><span style="z-index:2; color:white; font-size: 2.5rem;">${finalGrade}</span></div><h1>${totalScore>=5 ? "FelicitƒÉri!" : "Mai √ÆncearcƒÉ!"}</h1><p style="color:var(--text-muted);">Nota: ${finalGrade} / 10</p><div class="controls" style="margin-top:40px;"><button class="btn btn-secondary" onclick="location.href='hub_die.html'">Meniu DIE</button><button class="btn btn-primary" onclick="location.reload()">Din Nou</button></div></div>`;
    }

    function updateStreakUI() { streakEl.innerText = streak; if(streak > 2) streakEl.parentElement.style.background = "rgba(251, 191, 36, 0.4)"; else streakEl.parentElement.style.background = "rgba(251, 191, 36, 0.15)"; }
    function fireConfetti() { const c = ['#2563eb', '#fbbf24']; for (let i=0; i<50; i++) { const e = document.createElement('div'); e.className='confetti'; e.style.left=Math.random()*100+'vw'; e.style.top='-10px'; e.style.background=c[Math.floor(Math.random()*c.length)]; e.style.animationDuration=(Math.random()*3+2)+'s'; document.body.appendChild(e); } }

    initQuiz();
  </script>
</body>
</html>